{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport Navbar from '../components/Navbar';\nimport UserList from '../components/UserList';\nimport LoginMessage from '../components/LoginMessage';\nimport ChallengeInfo from '../components/ChallengeInfo';\nimport ChallengeCode from '../components/ChallengeCode';\nimport ContestList from '../components/ContestList';\nimport { Grid, Container } from '../styles/pages/Home';\nimport { useFetch } from '../hooks/useFetch';\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const data = useSelector(state => state.data);\n  const userId = useSelector(state => state.data.auth.user.id);\n  const authenticated = useSelector(state => state.data.auth.authenticated);\n  const selectedChallengeName = useSelector(state => state.data.selectedChallenge.name);\n  const {\n    data: globalScore\n  } = useFetch('https://code-contest-backend.herokuapp.com/contests/global');\n  const {\n    data: listOfUsers\n  } = useFetch('https://code-contest-backend.herokuapp.com/contests/user');\n  const {\n    data: challengeList\n  } = useFetch(`https://code-contest-backend.herokuapp.com/contests/list/${userId}`);\n  const {\n    data: challengeIndex\n  } = useFetch(`/contents/${selectedChallengeName === null || selectedChallengeName === void 0 ? void 0 : selectedChallengeName.split(' ').join('_')}/index.md`);\n  const {\n    data: challengeScore\n  } = useFetch(`https://code-contest-backend.herokuapp.com/contests/global/${selectedChallengeName}`);\n  const {\n    data: userScore\n  } = useFetch(`https://code-contest-backend.herokuapp.com/contests/${userId}/${selectedChallengeName}`);\n  const {\n    data: dataTree\n  } = useFetch('/git/trees/5c51dbca32b9394fe304b519826c1364806cdb9e?recursive=\"true\"');\n  const {\n    0: load,\n    1: setLoad\n  } = useState(false);\n  useEffect(() => {\n    const newData = {\n      data: data\n    };\n    console.log('globalScore ', globalScore);\n    console.log('listOfUsers ', listOfUsers);\n    console.log('challengeScore ', challengeScore);\n    console.log('userScore ', userScore);\n    console.log('challengeList ', challengeList);\n    console.log('dataTree ', dataTree);\n\n    if (globalScore && listOfUsers && challengeScore && userScore && challengeList && dataTree) {\n      newData.data.globalScore = globalScore;\n      newData.data.listOfUsers = listOfUsers;\n      newData.data.challengeScore = challengeScore;\n      newData.data.userScore = userScore;\n      newData.data.challengeList = challengeList;\n      newData.data.tree = dataTree;\n      setLoad(true);\n    }\n\n    if (challengeIndex) {\n      newData.data.challengeIndex = challengeIndex;\n    }\n\n    dispatch({\n      type: 'CHALLENGE',\n      data: newData\n    });\n  }, [globalScore, listOfUsers, challengeScore, userScore, challengeIndex, challengeList, dataTree, dispatch, data]);\n  return __jsx(Grid, null, __jsx(Head, null, __jsx(\"title\", null, \"Code Contest\")), load ? __jsx(React.Fragment, null, __jsx(Navbar, null), __jsx(ContestList, null), __jsx(Container, null, selectedChallengeName && selectedChallengeName.split('/').length > 1 && selectedChallengeName.split('/')[1].length > 1 ? __jsx(React.Fragment, null, __jsx(ChallengeInfo, null), authenticated ? __jsx(ChallengeCode, null) : __jsx(LoginMessage, null)) : __jsx(React.Fragment, null, \"Place home page here!\")), __jsx(UserList, null)) : __jsx(React.Fragment, null));\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}